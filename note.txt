B∆∞·ªõc 1: X√°c ƒë·ªãnh k·∫øt qu·∫£ cu·ªëi c√πng c·∫ßn l·∫•y
üëâ C√¢u h·ªèi: M√†n h√¨nh cu·ªëi c√πng c·∫ßn hi·ªÉn th·ªã g√¨?

B∆∞·ªõc 2: X√°c ƒë·ªãnh m·ªói c·ªôt l·∫•y t·ª´ b·∫£ng n√†o

B∆∞·ªõc 3: X√°c ƒë·ªãnh m·ªëi quan h·ªá gi·ªØa c√°c b·∫£ng

B∆∞·ªõc 4: X√°c ƒë·ªãnh ph√©p to√°n ƒë·∫∑c bi·ªát (COUNT, SUM, AVG...)

B∆∞·ªõc 5: X√°c ƒë·ªãnh GROUP BY theo c√°i g√¨

üß© GH√âP LOGIC TH√ÄNH SQL


‚òÖ„ÄÄsp th·∫•p nh·∫•t trong t·ª´ng danh m·ª•c

products (
  id,
  name,
  price,
  category_id
)

b1: h√¨nh dung ra 2 b·∫£ng product: 
	1) b·∫£ng 1 l·∫•y id_danh m·ª•c v√† gi√° s·∫£n ph·∫©m th·∫•p nh·∫•t
	2) b·∫£ng 2 l·∫•y th√¥ng tin s·∫£n ph·∫©m
	
b2: join 2 b·∫£ng l·∫°i v·ªõi nhau b·∫±ng id danh m·ª•c v√† gi√°

select p.* from products p 
inner join (
  select p1.category_id, min(p1.price) as `minimum price` 
  from products p1 
  group by p1.category_id
) as pp
on p.category_id = pp.category_id
and p.price = pp.`minimum price`;

‚ñ≤ l·∫•y ph·∫ßn kh√¥ng giao

select 
  p.*,
from products p 
left join order_detail od on p.id = od.product_id
where od.order_id is null;

‚òÖ„ÄÄ-- T√¨m nh·ªØng kh√°ch h√†ng ƒë√£ mua s·∫£n ph·∫©m thu·ªôc danh m·ª•c c√≥ s·ªë l∆∞·ª£ng s·∫£n ph·∫©m l·ªõn nh·∫•t.
 c√°ch 1 : b·ªã thi·∫øu d·ªØ li·ªáu n·∫øu tr√πng

select
  c.id,
  c.name
from customers c 
inner join orders o on c.id = o.customer_id
inner join order_detail od on o.id = od.order_id
inner join products p on od.product_id = p.id
inner join categories ca on p.category_id = ca.id
where ca.id = (
  select categories.id 
  from categories 
  inner join products
  on categories.id = products.category_id
  group by id
  order by count(products.category_id) desc limit 1
)
group by c.id;

 c√°ch 2 : kh√¥ng thi·∫øu d·ªØ li·ªáu khi tr√πng

SELECT DISTINCT c.id, c.name
FROM customers c
JOIN orders o ON c.id = o.customer_id
JOIN order_detail od ON o.id = od.order_id
JOIN products p ON od.product_id = p.id
WHERE p.category_id IN (
    SELECT category_id
    FROM products
    GROUP BY category_id
    HAVING COUNT(*) = (
        SELECT MAX(cnt)
        FROM (
            SELECT COUNT(*) AS cnt
            FROM products
            GROUP BY category_id
        ) t
    )
);

Ë™¨ÊòéÔºö
--  b1 m·ªói danh m·ª•c c√≥ bao nhi√™u s·∫£n ph·∫©m
select category_id, count(*) from products group by category_id;

-- b2 danh m·ª•c n√†o c√≥ s·ªë l∆∞·ª£ng s·∫£n ph·∫©m l·ªõn nh·∫•t
select max(cnt) from(
	select count(*) as cnt from products
    group by category_id
) temp;

-- b3 danh m·ª•c n√†o c√≥ s·ªë l∆∞·ª£ng s·∫£n ph·∫©m l·ªõn nh·∫•t
select 
	category_id
from products
group by category_id
having count(*) = (
	select max(cnt) from (
		select count(*) as cnt from products
        group by category_id
    ) temp
);

-- b4 join c√°c b·∫£ng v√† t√¨m ng∆∞·ªùi s·∫£n ph·∫©m c√≥ m√£ s·∫£n ph·∫©m ƒë√≥
select 
	c.id,
    c.customer_name,
    p.product_name
from customers c 
inner join orders o on c.id = o.customer_id
inner join order_details od on o.id = od.order_id
inner join products p on od.product_id = p.id
where p.category_id = (
	select category_id 
	from products
	group by category_id
	having count(*) = (
		select max(cnt) from (
			select count(*) as cnt from products
			group by category_id
		) temp
	)
);

‚ñ≤„ÄÄIFNULL(,) ph·∫£i n·∫±m trong SELECT 


‚ñ≤„ÄÄ`` d·∫•u backtick d√πng cho t√™n c·ªôt, t√™n b·∫£ng
    '' d·∫•u nh√°y ƒë∆°n d√πng cho chu·ªói